<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Model View Presenters: View to Presenter Communication | Andy Dote</title><meta name=keywords content="design,c#"><meta name=description content="Table of Contents: Introduction Presenter to View Communication View to Presenter Communication Composite Views Presenter / Application communication &mldr; Communicating from the View to the Presenter is a reasonably straight forward affair. To signal something happening, we use an Event, but one with no parameters. We pass no parameters, as we are not going to be using them anyway, so what is the point is raising an event every time with OkayClicked(this, EventArgs."><meta name=author content><link rel=canonical href=https://andydote.co.uk/2012/01/31/model-view-presenters-view-to-presenter-communication/><link crossorigin=anonymous href=/assets/css/stylesheet.min.b4e19c453811e60acfec1f00c15ac2be1c53f6ab90187e684358ce7faaf48bab.css integrity="sha256-tOGcRTgR5grP7B8AwVrCvhxT9quQGH5oQ1jOf6r0i6s=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.e85ad0406048e8176e1c7661b25d5c69297ddfe41dc4124cf75ecb99a4f7b3d1.js integrity="sha256-6FrQQGBI6BduHHZhsl1caSl93+QdxBJM917LmaT3s9E=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://andydote.co.uk/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://andydote.co.uk/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://andydote.co.uk/favicon-32x32.png><link rel=apple-touch-icon href=https://andydote.co.uk/apple-touch-icon.png><link rel=mask-icon href=https://andydote.co.uk/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="Model View Presenters: View to Presenter Communication"><meta property="og:description" content="Table of Contents: Introduction Presenter to View Communication View to Presenter Communication Composite Views Presenter / Application communication &mldr; Communicating from the View to the Presenter is a reasonably straight forward affair. To signal something happening, we use an Event, but one with no parameters. We pass no parameters, as we are not going to be using them anyway, so what is the point is raising an event every time with OkayClicked(this, EventArgs."><meta property="og:type" content="article"><meta property="og:url" content="https://andydote.co.uk/2012/01/31/model-view-presenters-view-to-presenter-communication/"><meta property="article:section" content="post"><meta property="article:published_time" content="2012-01-31T00:00:00+00:00"><meta property="article:modified_time" content="2012-01-31T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Model View Presenters: View to Presenter Communication"><meta name=twitter:description content="Table of Contents: Introduction Presenter to View Communication View to Presenter Communication Composite Views Presenter / Application communication &mldr; Communicating from the View to the Presenter is a reasonably straight forward affair. To signal something happening, we use an Event, but one with no parameters. We pass no parameters, as we are not going to be using them anyway, so what is the point is raising an event every time with OkayClicked(this, EventArgs."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://andydote.co.uk/post/"},{"@type":"ListItem","position":3,"name":"Model View Presenters: View to Presenter Communication","item":"https://andydote.co.uk/2012/01/31/model-view-presenters-view-to-presenter-communication/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Model View Presenters: View to Presenter Communication","name":"Model View Presenters: View to Presenter Communication","description":"Table of Contents: Introduction Presenter to View Communication View to Presenter Communication Composite Views Presenter / Application communication \u0026hellip; Communicating from the View to the Presenter is a reasonably straight forward affair. To signal something happening, we use an Event, but one with no parameters. We pass no parameters, as we are not going to be using them anyway, so what is the point is raising an event every time with OkayClicked(this, EventArgs.","keywords":["design","c#"],"articleBody":"Table of Contents: Introduction Presenter to View Communication View to Presenter Communication Composite Views Presenter / Application communication … Communicating from the View to the Presenter is a reasonably straight forward affair. To signal something happening, we use an Event, but one with no parameters. We pass no parameters, as we are not going to be using them anyway, so what is the point is raising an event every time with OkayClicked(this, EventArgs.Empty)?\nTo get around this, we define a new event type, so that we can get rid of our redundant parameters:\npublic delegate void EventAction(); In the View we define our events:\npublic interface IEmployeesView { event EventAction OkayClicked; event EventAction CancelClicked; } And in the Presenter we hook up the events:\npublic class EmployeesPresenter : IDisposable { private readonly IEmployeeView _view; public EmployeesPresenter(IEmployeesView view) { _view = view; _view.OkayClicked += OnOkayClicked; _view.CancelClicked += OnCancelClicked; } private void OnOkayClicked() { /* ... */ } private void OnCancelClicked() { /* ... */ } public void Dispose() { _view.OkayClicked -= OnOkayClicked; _view.CancelClicked -= OnCancelClicked; } } Now I don’t know about you, but I dislike having to wire and unwire an event like this - there is too much chance that I will either forget to unwire one of the events, or when copying and pasting the Add code (I know, I know) to the Remove section, I will forget to change a + to a -.\nTo this end, I created a class that will auto wire events to handlers based on a convention. It was based off of the Presenter base class written by Mark Nijhof in his Fohjin.DDD sample application, with a few improvements (namely the unwiring of events). To avoid the need to make your Presenters inherit from a base class (and to not violate SRP!), it is wrapped up into its own class, which can be used like so:\npublic class EmployeesPresenter : IDisposable { private readonly IEmployeeView _view; private readonly EventAutoWirer _autoWire; public EmployeesPresenter(IEmployeesView view) { _view = view; _autoWire = new EventAutoWire(view, this); _autoWire.Wire(); } private void OnOkayClicked() { /* ... */ } private void OnCancelClicked() { /* ... */ } public void Dispose() { _autoWire.Unwire(); } } The wirer supports conventions to allow easier hook-up - by default it will only hook events defined in the View’s interface to private methods prefixed with “On” in the presenter. This means that any events which are only defined in the concrete implementation of the View are not wired automatically - allowing extra view only functionality such as when an item is MouseOver’d etc.\n","wordCount":"429","inLanguage":"en","datePublished":"2012-01-31T00:00:00Z","dateModified":"2012-01-31T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://andydote.co.uk/2012/01/31/model-view-presenters-view-to-presenter-communication/"},"publisher":{"@type":"Organization","name":"Andy Dote","logo":{"@type":"ImageObject","url":"https://andydote.co.uk/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://andydote.co.uk accesskey=h title="Andy Dote (Alt + H)">Andy Dote</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://andydote.co.uk/archive title=Archive><span>Archive</span></a></li><li><a href=https://andydote.co.uk/talks title=Talks><span>Talks</span></a></li><li><a href=https://andydote.co.uk/notes title=Notes><span>Notes</span></a></li><li><a href=https://andydote.co.uk/tags title=Tags><span>Tags</span></a></li><li><a href=https://andydote.co.uk/contact title=Contact><span>Contact</span></a></li><li><a href=https://andydote.co.uk/rss.xml title=RSS><span>RSS</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Model View Presenters: View to Presenter Communication</h1><div class=post-meta><span title='2012-01-31 00:00:00 +0000 UTC'>January 31, 2012</span>&nbsp;·&nbsp;3 min</div></header><div class=post-content><h2 id=table-of-contents>Table of Contents:<a hidden class=anchor aria-hidden=true href=#table-of-contents>#</a></h2><ul><li><a href=/model-view-presenter-introduction>Introduction</a></li><li><a href=/model-view-presenters-presenter-to-view-communication>Presenter to View Communication</a></li><li><strong>View to Presenter Communication</strong></li><li><a href=/model-view-presenters-composite-views>Composite Views</a></li><li>Presenter / Application communication</li><li>&mldr;</li></ul><p>Communicating from the View to the Presenter is a reasonably straight forward affair. To signal something happening, we use an <code>Event</code>, but one with no parameters. We pass no parameters, as we are not going to be using them anyway, so what is the point is raising an event every time with <code>OkayClicked(this, EventArgs.Empty)</code>?</p><p>To get around this, we define a new event type, so that we can get rid of our redundant parameters:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>delegate</span> <span style=color:#66d9ef>void</span> EventAction();
</span></span></code></pre></div><p>In the View we define our events:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>IEmployeesView</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>event</span> EventAction OkayClicked;
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>event</span> EventAction CancelClicked;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>And in the Presenter we hook up the events:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>EmployeesPresenter</span> : IDisposable
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>private</span> <span style=color:#66d9ef>readonly</span> IEmployeeView _view;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>public</span> EmployeesPresenter(IEmployeesView view)
</span></span><span style=display:flex><span>	{
</span></span><span style=display:flex><span>		_view = view;
</span></span><span style=display:flex><span>		_view.OkayClicked += OnOkayClicked;
</span></span><span style=display:flex><span>		_view.CancelClicked += OnCancelClicked;
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>private</span> <span style=color:#66d9ef>void</span> OnOkayClicked() { <span style=color:#75715e>/* ... */</span> }
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>private</span> <span style=color:#66d9ef>void</span> OnCancelClicked() { <span style=color:#75715e>/* ... */</span> }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> Dispose()
</span></span><span style=display:flex><span>	{
</span></span><span style=display:flex><span>		_view.OkayClicked -= OnOkayClicked;
</span></span><span style=display:flex><span>		_view.CancelClicked -= OnCancelClicked;
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Now I don&rsquo;t know about you, but I dislike having to wire and unwire an event like this - there is too much chance that I will either forget to unwire one of the events, or when copying and pasting the Add code (I know, I know) to the Remove section, I will forget to change a <code>+</code> to a <code>-</code>.</p><p>To this end, I created a class that will auto wire events to handlers based on a convention. It was based off of the Presenter base class written by <a href=http://cre8ivethought.com/blog/index>Mark Nijhof</a> in his <a href=https://github.com/MarkNijhof/Fohjin>Fohjin.DDD</a> sample application, with a few improvements (namely the unwiring of events). To avoid the need to make your Presenters inherit from a base class (and to not violate SRP!), it is wrapped up into its own class, which can be used like so:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>EmployeesPresenter</span> : IDisposable
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>private</span> <span style=color:#66d9ef>readonly</span> IEmployeeView _view;
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>private</span> <span style=color:#66d9ef>readonly</span> EventAutoWirer&lt;IEmployeeView&gt; _autoWire;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>public</span> EmployeesPresenter(IEmployeesView view)
</span></span><span style=display:flex><span>	{
</span></span><span style=display:flex><span>		_view = view;
</span></span><span style=display:flex><span>		_autoWire = <span style=color:#66d9ef>new</span> EventAutoWire&lt;IEmployeeView&gt;(view, <span style=color:#66d9ef>this</span>);
</span></span><span style=display:flex><span>		_autoWire.Wire();
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>private</span> <span style=color:#66d9ef>void</span> OnOkayClicked() { <span style=color:#75715e>/* ... */</span> }
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>private</span> <span style=color:#66d9ef>void</span> OnCancelClicked() { <span style=color:#75715e>/* ... */</span> }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> Dispose()
</span></span><span style=display:flex><span>	{
</span></span><span style=display:flex><span>		_autoWire.Unwire();
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The wirer supports conventions to allow easier hook-up - by default it will only hook events defined in the View&rsquo;s interface to private methods prefixed with &ldquo;On&rdquo; in the presenter. This means that any events which are only defined in the concrete implementation of the View are not wired automatically - allowing extra view only functionality such as when an item is MouseOver&rsquo;d etc.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://andydote.co.uk/tags/design/>design</a></li><li><a href=https://andydote.co.uk/tags/c#/>c#</a></li></ul><nav class=paginav><a class=prev href=https://andydote.co.uk/2012/03/29/model-view-presenters-composite-views/><span class=title>« Prev Page</span><br><span>Model View Presenters: Composite Views</span></a>
<a class=next href=https://andydote.co.uk/2012/01/26/model-view-presenter-introduction/><span class=title>Next Page »</span><br><span>Model View Presenters: Introduction</span></a></nav></footer></article></main><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>