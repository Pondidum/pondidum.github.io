<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Differences between Properties and Auto Properties | Andy Dote</title><meta name=keywords content="c#"><meta name=description content="While writing some of the specs for ViewWeaver, I noticed that one was failing:
When passed a type with one write only property
it should return no mappings When I stepped through the code, it was indeed not filtering out the write only property. This is the code used to find all readable properties:
var allProperties = typeof(T).GetProperties(BindingFlags.Instance | BindingFlags.Public); var readableProperties = allProperties.Where(p => p.CanRead && !p.GetIndexParameters().Any()); For some reason CanRead was returning true, then I noticed how I had defined my class under test:"><meta name=author content><link rel=canonical href=https://andydote.co.uk/2011/07/11/differences-between-properties-and-auto-properties/><link crossorigin=anonymous href=/assets/css/stylesheet.min.b4e19c453811e60acfec1f00c15ac2be1c53f6ab90187e684358ce7faaf48bab.css integrity="sha256-tOGcRTgR5grP7B8AwVrCvhxT9quQGH5oQ1jOf6r0i6s=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.e85ad0406048e8176e1c7661b25d5c69297ddfe41dc4124cf75ecb99a4f7b3d1.js integrity="sha256-6FrQQGBI6BduHHZhsl1caSl93+QdxBJM917LmaT3s9E=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://andydote.co.uk/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://andydote.co.uk/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://andydote.co.uk/favicon-32x32.png><link rel=apple-touch-icon href=https://andydote.co.uk/apple-touch-icon.png><link rel=mask-icon href=https://andydote.co.uk/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="Differences between Properties and Auto Properties"><meta property="og:description" content="While writing some of the specs for ViewWeaver, I noticed that one was failing:
When passed a type with one write only property
it should return no mappings When I stepped through the code, it was indeed not filtering out the write only property. This is the code used to find all readable properties:
var allProperties = typeof(T).GetProperties(BindingFlags.Instance | BindingFlags.Public); var readableProperties = allProperties.Where(p => p.CanRead && !p.GetIndexParameters().Any()); For some reason CanRead was returning true, then I noticed how I had defined my class under test:"><meta property="og:type" content="article"><meta property="og:url" content="https://andydote.co.uk/2011/07/11/differences-between-properties-and-auto-properties/"><meta property="article:section" content="post"><meta property="article:published_time" content="2011-07-11T00:00:00+00:00"><meta property="article:modified_time" content="2011-07-11T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Differences between Properties and Auto Properties"><meta name=twitter:description content="While writing some of the specs for ViewWeaver, I noticed that one was failing:
When passed a type with one write only property
it should return no mappings When I stepped through the code, it was indeed not filtering out the write only property. This is the code used to find all readable properties:
var allProperties = typeof(T).GetProperties(BindingFlags.Instance | BindingFlags.Public); var readableProperties = allProperties.Where(p => p.CanRead && !p.GetIndexParameters().Any()); For some reason CanRead was returning true, then I noticed how I had defined my class under test:"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://andydote.co.uk/post/"},{"@type":"ListItem","position":3,"name":"Differences between Properties and Auto Properties","item":"https://andydote.co.uk/2011/07/11/differences-between-properties-and-auto-properties/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Differences between Properties and Auto Properties","name":"Differences between Properties and Auto Properties","description":"While writing some of the specs for ViewWeaver, I noticed that one was failing:\nWhen passed a type with one write only property\nit should return no mappings When I stepped through the code, it was indeed not filtering out the write only property. This is the code used to find all readable properties:\nvar allProperties = typeof(T).GetProperties(BindingFlags.Instance | BindingFlags.Public); var readableProperties = allProperties.Where(p =\u0026gt; p.CanRead \u0026amp;\u0026amp; !p.GetIndexParameters().Any()); For some reason CanRead was returning true, then I noticed how I had defined my class under test:","keywords":["c#"],"articleBody":"While writing some of the specs for ViewWeaver, I noticed that one was failing:\nWhen passed a type with one write only property\nit should return no mappings When I stepped through the code, it was indeed not filtering out the write only property. This is the code used to find all readable properties:\nvar allProperties = typeof(T).GetProperties(BindingFlags.Instance | BindingFlags.Public); var readableProperties = allProperties.Where(p =\u003e p.CanRead \u0026\u0026 !p.GetIndexParameters().Any()); For some reason CanRead was returning true, then I noticed how I had defined my class under test:\npublic class OnePublicWriteonlyProperty { public String Test { private get; set; } } So it turns out that even though I had filtered to all Public Properties, a private Getter (or Setter) still passes through.\nvar allProperties = typeof(T).GetProperties(BindingFlags.Instance | BindingFlags.Public); var readableProperties = allProperties.Where(p =\u003e p.CanRead \u0026\u0026 p.GetGetMethod() != null \u0026\u0026 p.GetGetMethod().IsPublic \u0026\u0026 !p.GetIndexParameters().Any()); Changing the expression to check for the GetMethod existing, and being public fixed this, and seems obvious in retrospect, but it is worth remembering that an Auto Property is ever so slightly different from a plain property with only a Get or Set method defined.\n","wordCount":"186","inLanguage":"en","datePublished":"2011-07-11T00:00:00Z","dateModified":"2011-07-11T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://andydote.co.uk/2011/07/11/differences-between-properties-and-auto-properties/"},"publisher":{"@type":"Organization","name":"Andy Dote","logo":{"@type":"ImageObject","url":"https://andydote.co.uk/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://andydote.co.uk accesskey=h title="Andy Dote (Alt + H)">Andy Dote</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://andydote.co.uk/archive title=Archive><span>Archive</span></a></li><li><a href=https://andydote.co.uk/talks title=Talks><span>Talks</span></a></li><li><a href=https://andydote.co.uk/notes title=Notes><span>Notes</span></a></li><li><a href=https://andydote.co.uk/tags title=Tags><span>Tags</span></a></li><li><a href=https://andydote.co.uk/contact title=Contact><span>Contact</span></a></li><li><a href=https://andydote.co.uk/rss.xml title=RSS><span>RSS</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Differences between Properties and Auto Properties</h1><div class=post-meta><span title='2011-07-11 00:00:00 +0000 UTC'>July 11, 2011</span>&nbsp;·&nbsp;1 min</div></header><div class=post-content><p>While writing some of the specs for <a href=https://github.com/Pondidum/ViewWeaver>ViewWeaver</a>, I noticed that one was failing:</p><blockquote><p>When passed a type with one write only property</p><ul><li>it should return no mappings</li></ul></blockquote><p>When I stepped through the code, it was indeed not filtering out the write only property.
This is the code used to find all readable properties:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>var</span> allProperties = <span style=color:#66d9ef>typeof</span>(T).GetProperties(BindingFlags.Instance | BindingFlags.Public);
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> readableProperties = allProperties.Where(p =&gt; p.CanRead &amp;&amp; !p.GetIndexParameters().Any());
</span></span></code></pre></div><p>For some reason <code>CanRead</code> was returning true, then I noticed how I had defined my class under test:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>OnePublicWriteonlyProperty</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>public</span> String Test { <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>set</span>; }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>So it turns out that even though I had filtered to all Public Properties, a private Getter (or Setter) still passes through.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>var</span> allProperties = <span style=color:#66d9ef>typeof</span>(T).GetProperties(BindingFlags.Instance | BindingFlags.Public);
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> readableProperties = allProperties.Where(p =&gt; p.CanRead &amp;&amp;
</span></span><span style=display:flex><span>											 p.GetGetMethod() != <span style=color:#66d9ef>null</span> &amp;&amp;
</span></span><span style=display:flex><span>											 p.GetGetMethod().IsPublic &amp;&amp;
</span></span><span style=display:flex><span>											 !p.GetIndexParameters().Any());
</span></span></code></pre></div><p>Changing the expression to check for the GetMethod existing, and being public fixed this, and seems obvious in retrospect, but it is worth remembering that an Auto Property is ever so slightly different from a plain property with only a Get or Set method defined.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://andydote.co.uk/tags/c#/>c#</a></li></ul><nav class=paginav><a class=prev href=https://andydote.co.uk/2011/08/09/c-enum-casting/><span class=title>« Prev Page</span><br><span>c# Enum casting</span></a>
<a class=next href=https://andydote.co.uk/2011/03/17/missuse-of-narrowing-implicit-operators/><span class=title>Next Page »</span><br><span>(Miss)Use of Narrowing-Implicit Operators</span></a></nav></footer></article></main><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>