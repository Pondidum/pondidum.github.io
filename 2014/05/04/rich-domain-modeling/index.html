<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Writing Rich Domain Models | Andy Dote</title><meta name=keywords content="design,c#,domain,ddd"><meta name=description content="The term Rich Domain Model is used to describe a domain model which really shows you how you should be using and manipulating the model, rather than letting you do anything with it. It is the opposite of an Anaemic Domain Model, which provides a very low abstraction over the data storage (generally), but with little to no enforcing of rules.
The Anaemic Domain Model To take the standard model of a person who has addresses and phone numbers etc seems a little contrite, so lets run through an example using timesheets (bear in mind I don&rsquo;t know what really goes into a timesheet system, this just seems reasonable)."><meta name=author content><link rel=canonical href=https://andydote.co.uk/2014/05/04/rich-domain-modeling/><link crossorigin=anonymous href=/assets/css/stylesheet.min.4ac25d88867f6882d86478d9b478a3d3efa1ed9e18f0bc5e432812301516cb28.css integrity="sha256-SsJdiIZ/aILYZHjZtHij0++h7Z4Y8LxeQygSMBUWyyg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/mermaid.min.725f44bd345b0a2a4043ca952b0863edd789e913cf0813a12bbdfe986fe87079.js integrity="sha256-cl9EvTRbCipAQ8qVKwhj7deJ6RPPCBOhK73+mG/ocHk="></script>
<script defer crossorigin=anonymous src=/js/tabs.min.2d019e9ee3574770ad4ecfd4f5f794739892195cb82a4e6383252b9074ab520c.js integrity="sha256-LQGenuNXR3CtTs/U9feUc5iSGVy4Kk5jgyUrkHSrUgw="></script>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.b95bacdc39e37a332a9f883b1e78be4abc1fdca2bc1f2641f55e3cd3dabd4d61.js integrity="sha256-uVus3DnjejMqn4g7Hni+Srwf3KK8HyZB9V4809q9TWE=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://andydote.co.uk/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://andydote.co.uk/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://andydote.co.uk/favicon-32x32.png><link rel=apple-touch-icon href=https://andydote.co.uk/apple-touch-icon.png><link rel=mask-icon href=https://andydote.co.uk/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="Writing Rich Domain Models"><meta property="og:description" content="The term Rich Domain Model is used to describe a domain model which really shows you how you should be using and manipulating the model, rather than letting you do anything with it. It is the opposite of an Anaemic Domain Model, which provides a very low abstraction over the data storage (generally), but with little to no enforcing of rules.
The Anaemic Domain Model To take the standard model of a person who has addresses and phone numbers etc seems a little contrite, so lets run through an example using timesheets (bear in mind I don&rsquo;t know what really goes into a timesheet system, this just seems reasonable)."><meta property="og:type" content="article"><meta property="og:url" content="https://andydote.co.uk/2014/05/04/rich-domain-modeling/"><meta property="article:section" content="post"><meta property="article:published_time" content="2014-05-04T00:00:00+00:00"><meta property="article:modified_time" content="2014-05-04T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Writing Rich Domain Models"><meta name=twitter:description content="The term Rich Domain Model is used to describe a domain model which really shows you how you should be using and manipulating the model, rather than letting you do anything with it. It is the opposite of an Anaemic Domain Model, which provides a very low abstraction over the data storage (generally), but with little to no enforcing of rules.
The Anaemic Domain Model To take the standard model of a person who has addresses and phone numbers etc seems a little contrite, so lets run through an example using timesheets (bear in mind I don&rsquo;t know what really goes into a timesheet system, this just seems reasonable)."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://andydote.co.uk/post/"},{"@type":"ListItem","position":3,"name":"Writing Rich Domain Models","item":"https://andydote.co.uk/2014/05/04/rich-domain-modeling/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Writing Rich Domain Models","name":"Writing Rich Domain Models","description":"The term Rich Domain Model is used to describe a domain model which really shows you how you should be using and manipulating the model, rather than letting you do anything with it. It is the opposite of an Anaemic Domain Model, which provides a very low abstraction over the data storage (generally), but with little to no enforcing of rules.\nThe Anaemic Domain Model To take the standard model of a person who has addresses and phone numbers etc seems a little contrite, so lets run through an example using timesheets (bear in mind I don\u0026rsquo;t know what really goes into a timesheet system, this just seems reasonable).","keywords":["design","c#","domain","ddd"],"articleBody":"The term Rich Domain Model is used to describe a domain model which really shows you how you should be using and manipulating the model, rather than letting you do anything with it. It is the opposite of an Anaemic Domain Model, which provides a very low abstraction over the data storage (generally), but with little to no enforcing of rules.\nThe Anaemic Domain Model To take the standard model of a person who has addresses and phone numbers etc seems a little contrite, so lets run through an example using timesheets (bear in mind I don’t know what really goes into a timesheet system, this just seems reasonable). The current model looks something like the following:\npublic class TimeSheet : DbEntity { public DateTime WeekDate { get; set; } public TimeSheetStates State { get; set; } public TimeSheetLineCollection Lines { get; set; } //... } public class TimeSheetLineCollection : DbEntityCollection { } public class TimeSheetLine : DbEntity { public DateTime Day { get; set;} public LineTypes LineType { get; set; } public decimal HourlyRate { get; set; } public decimal Hours { get; set; } } public enum TimeSheetStates { New, Saved, Submitted, Approved, Rejected } public enum LineTypes { Normal, Holiday, Sick } The first problem with this model is that the domain entities are inheriting directly from a DbEntity which is coupling our logic directly to our data access, which amongst other things is a violation of SRP. Putting this aside for the time being, the next issue is that the domain model lets you do anything with the objects and collections.\nThe model implies that there are rules governing its usage somewhere, but gives no hint as to what these rules are, or where they are located. Rules such as ‘only allow hours to be entered in increments of half an hour’ and ’no more than 5 lines in a given week’ really should be in the domain model itself, as a Rich Domain Model should not allow itself to get into an invalid state.\nThe model also is leaking what kind of data store it is built on - after all, if you had an Event Sourcing pattern for storage, a Delete operation on the TimeSheetLineCollection would not make a lot of sense.\nThe Rich Domain Model A better version of this model is to make all the behaviour explicit, rather than just exposing the collections for external modification:\npublic class TimeSheet { public DateTime WeekDate { get; private set; } public TimeSheetStates State { get; private set; } public IEnumerable Lines { get { return _lines; } } private readonly List _lines; private readonly TimeSheetRules _rules; public TimeSheet(TimeSheetRules rules, DateTime weekDate) { _lines = new List(); _rules = rules; WeekDate = weekDate } public void AddLine(DayOfWeek day, LineTypes lineType, decimal hours, decimal hourlyRate) { var line = new TimeSheetLine { Day = WeekDate.AddDays(day), LineType = lineType, Hours = hours, HourlyRate = hourlyRate }; _rules.ValidateAdd(Lines, line);\t//throws a descriptive error message if you can't do add. _lines.Add(line); } } The Rich model does a number of interesting things. The first is that all the properties of the TimeSheet class are now private set. This allows us to enforce rules on when and how they get set. For example, the WeekDate property value gets passed in via the constructor, as our domain says that for a week to be valid it must have a weekdate.\nThe major improvement is in adding lines to the TimeSheet. In the Anaemic version of the model, you could have just created a TimeSheetLine object and set the Day property to an arbitrary date, rather than one in the given week’s range. The Rich model forces the caller to pass in a DayOfWeek to the function, which ensures that a valid datetime will get stored for the line. The AddLine method also calls _rules.ValidateAdd() which gives us a central place for putting rules on line actions.\nNow that the user has been able to fill out all the lines in their timesheet, the next likely action they want to perform is to submit it for authorization. We can do this by adding the following method:\npublic void SubmitForApproval(User approver) { _rules.ValidateTimeSheetIsComplete(this); approver.AddWaitingTimeSheet(this); State = TimeSheetStates.Submitted; } Note this method only validates if the timesheet is complete enough to be approved - validation for whether the approver can actually approve this timesheet is held within the apperover.AddWaitingTimeSheet method.\nThe next thing to consider is when the approver rejects the timesheet because the user filled out the wrong weekdate. Rather than just exposing Weekdate to be publicly setable, we can capture the intent of the adjustment with a set of methods:\npublic void UserEnteredIncorrectWeek(DateTime newDate) { var delta = WeekDate - newDate; WeekDate = newDate; _lines.ForEach(line =\u003e line.Day = line.Day.AddDays(-delta)); } Note how the method is named to capture the reason for the change. Although we are not actively storing the reason, if we were using an EventStream for the backing store, or maintaining a separate log of changes we would now have a reason as to why the change was made. This helps guide UI elements - rather then just having an “Edit Week Date” button, there could be a UI element which says “Change Incorrect Week” or similar.\nThe function also has some logic baked into it - each of the TimeSheetLines needs its Day property re-calculating.\nHopefully this helps demonstrate why Rich Domain Models are better solutions to complex domain problems than Anaemic Domain Models are.\nFor a really good video on this subject, check out Jimmy Bogard’s Crafting Wicked Domain Models talk.\n","wordCount":"933","inLanguage":"en","datePublished":"2014-05-04T00:00:00Z","dateModified":"2014-05-04T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://andydote.co.uk/2014/05/04/rich-domain-modeling/"},"publisher":{"@type":"Organization","name":"Andy Dote","logo":{"@type":"ImageObject","url":"https://andydote.co.uk/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://andydote.co.uk accesskey=h title="Andy Dote (Alt + H)">Andy Dote</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://andydote.co.uk/archive title=Archive><span>Archive</span></a></li><li><a href=https://andydote.co.uk/talks title=Talks><span>Talks</span></a></li><li><a href=https://andydote.co.uk/notes title=Notes><span>Notes</span></a></li><li><a href=https://andydote.co.uk/tags title=Tags><span>Tags</span></a></li><li><a href=https://andydote.co.uk/contact title=Contact><span>Contact</span></a></li><li><a href=https://andydote.co.uk/rss.xml title=RSS><span>RSS</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Writing Rich Domain Models</h1><div class=post-meta><span title='2014-05-04 00:00:00 +0000 UTC'>May 4, 2014</span>&nbsp;·&nbsp;5 min</div></header><div class=post-content><p>The term Rich Domain Model is used to describe a domain model which really shows you how you should be using and manipulating the model, rather than letting you do anything with it. It is the opposite of an Anaemic Domain Model, which provides a very low abstraction over the data storage (generally), but with little to no enforcing of rules.</p><h2 id=the-anaemic-domain-model>The Anaemic Domain Model<a hidden class=anchor aria-hidden=true href=#the-anaemic-domain-model>#</a></h2><p>To take the standard model of a person who has addresses and phone numbers etc seems a little contrite, so lets run through an example using timesheets (bear in mind I don&rsquo;t know what really goes into a timesheet system, this just seems reasonable). The current model looks something like the following:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TimeSheet</span> : DbEntity
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>public</span> DateTime WeekDate { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>set</span>; }
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>public</span> TimeSheetStates State { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>set</span>; }
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>public</span> TimeSheetLineCollection Lines { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>set</span>; }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>//...</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TimeSheetLineCollection</span> : DbEntityCollection&lt;TimeSheetLine&gt;
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TimeSheetLine</span> : DbEntity
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>public</span> DateTime Day { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>set</span>;}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>public</span> LineTypes LineType { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>set</span>; }
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>decimal</span> HourlyRate { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>set</span>; }
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>decimal</span> Hours { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>set</span>; }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>enum</span> TimeSheetStates
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	New,
</span></span><span style=display:flex><span>	Saved,
</span></span><span style=display:flex><span>	Submitted,
</span></span><span style=display:flex><span>	Approved,
</span></span><span style=display:flex><span>	Rejected
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>enum</span> LineTypes
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	Normal,
</span></span><span style=display:flex><span>	Holiday,
</span></span><span style=display:flex><span>	Sick
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The first problem with this model is that the domain entities are inheriting directly from a <code>DbEntity</code> which is coupling our logic directly to our data access, which amongst other things is a violation of <a href=http://andydote.co.uk/solid-principles-srp>SRP</a>. Putting this aside for the time being, the next issue is that the domain model lets you do anything with the objects and collections.</p><p>The model implies that there are rules governing its usage somewhere, but gives no hint as to what these rules are, or where they are located. Rules such as &lsquo;only allow hours to be entered in increments of half an hour&rsquo; and &rsquo;no more than 5 lines in a given week&rsquo; really should be in the domain model itself, as a Rich Domain Model should not allow itself to get into an invalid state.</p><p>The model also is leaking what kind of data store it is built on - after all, if you had an Event Sourcing pattern for storage, a <code>Delete</code> operation on the <code>TimeSheetLineCollection</code> would not make a lot of sense.</p><h2 id=the-rich-domain-model>The Rich Domain Model<a hidden class=anchor aria-hidden=true href=#the-rich-domain-model>#</a></h2><p>A better version of this model is to make all the behaviour explicit, rather than just exposing the collections for external modification:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TimeSheet</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>public</span> DateTime WeekDate { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>set</span>; }
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>public</span> TimeSheetStates State { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>set</span>; }
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>public</span> IEnumerable&lt;TimeSheetLine&gt; Lines { <span style=color:#66d9ef>get</span> { <span style=color:#66d9ef>return</span> _lines; } }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>private</span> <span style=color:#66d9ef>readonly</span> List&lt;TimeSheetLine&gt; _lines;
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>private</span> <span style=color:#66d9ef>readonly</span> TimeSheetRules _rules;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>public</span> TimeSheet(TimeSheetRules rules, DateTime weekDate)
</span></span><span style=display:flex><span>	{
</span></span><span style=display:flex><span>		_lines = <span style=color:#66d9ef>new</span> List&lt;TimeSheetLine&gt;();
</span></span><span style=display:flex><span>		_rules = rules;
</span></span><span style=display:flex><span>		WeekDate = weekDate
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> AddLine(DayOfWeek day, LineTypes lineType, <span style=color:#66d9ef>decimal</span> hours, <span style=color:#66d9ef>decimal</span> hourlyRate)
</span></span><span style=display:flex><span>	{
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>var</span> line = <span style=color:#66d9ef>new</span> TimeSheetLine {
</span></span><span style=display:flex><span>			Day = WeekDate.AddDays(day),
</span></span><span style=display:flex><span>			LineType = lineType,
</span></span><span style=display:flex><span>			Hours = hours,
</span></span><span style=display:flex><span>			HourlyRate = hourlyRate
</span></span><span style=display:flex><span>		};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		_rules.ValidateAdd(Lines, line);	<span style=color:#75715e>//throws a descriptive error message if you can&#39;t do add.</span>
</span></span><span style=display:flex><span>		_lines.Add(line);
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The Rich model does a number of interesting things. The first is that all the properties of the <code>TimeSheet</code> class are now <code>private set</code>. This allows us to enforce rules on when and how they get set. For example, the <code>WeekDate</code> property value gets passed in via the constructor, as our domain says that for a week to be valid it must have a weekdate.</p><p>The major improvement is in adding lines to the <code>TimeSheet</code>. In the Anaemic version of the model, you could have just created a <code>TimeSheetLine</code> object and set the <code>Day</code> property to an arbitrary date, rather than one in the given week&rsquo;s range. The Rich model forces the caller to pass in a <code>DayOfWeek</code> to the function, which ensures that a valid datetime will get stored for the line. The <code>AddLine</code> method also calls <code>_rules.ValidateAdd()</code> which gives us a central place for putting rules on line actions.</p><p>Now that the user has been able to fill out all the lines in their timesheet, the next likely action they want to perform is to submit it for authorization. We can do this by adding the following method:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> SubmitForApproval(User approver)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	_rules.ValidateTimeSheetIsComplete(<span style=color:#66d9ef>this</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	approver.AddWaitingTimeSheet(<span style=color:#66d9ef>this</span>);
</span></span><span style=display:flex><span>	State = TimeSheetStates.Submitted;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Note this method only validates if the timesheet is complete enough to be approved - validation for whether the approver can actually approve this timesheet is held within the <code>apperover.AddWaitingTimeSheet</code> method.</p><p>The next thing to consider is when the approver rejects the timesheet because the user filled out the wrong weekdate. Rather than just exposing Weekdate to be publicly setable, we can capture the intent of the adjustment with a set of methods:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> UserEnteredIncorrectWeek(DateTime newDate)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>var</span> delta = WeekDate - newDate;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	WeekDate = newDate;
</span></span><span style=display:flex><span>	_lines.ForEach(line =&gt; line.Day = line.Day.AddDays(-delta));
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Note how the method is named to capture the reason for the change. Although we are not actively storing the reason, if we were using an EventStream for the backing store, or maintaining a separate log of changes we would now have a reason as to why the change was made. This helps guide UI elements - rather then just having an &ldquo;Edit Week Date&rdquo; button, there could be a UI element which says &ldquo;Change Incorrect Week&rdquo; or similar.</p><p>The function also has some logic baked into it - each of the <code>TimeSheetLine</code>s needs its <code>Day</code> property re-calculating.</p><p>Hopefully this helps demonstrate why Rich Domain Models are better solutions to complex domain problems than Anaemic Domain Models are.</p><p>For a really good video on this subject, check out Jimmy Bogard&rsquo;s <a href=http://vimeo.com/43598193>Crafting Wicked Domain Models</a> talk.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://andydote.co.uk/tags/design/>design</a></li><li><a href=https://andydote.co.uk/tags/c#/>c#</a></li><li><a href=https://andydote.co.uk/tags/domain/>domain</a></li><li><a href=https://andydote.co.uk/tags/ddd/>ddd</a></li></ul><nav class=paginav><a class=prev href=https://andydote.co.uk/2014/05/19/using-structuremap-registries/><span class=title>« Prev Page</span><br><span>Using StructureMap Registries for better separation</span></a>
<a class=next href=https://andydote.co.uk/2014/03/29/using-a-micro-orm-to-decouple-your-db-access/><span class=title>Next Page »</span><br><span>Using a Micro ORM to decouple your DB Access</span></a></nav></footer></article></main><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>