<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>architecture | Andy Dote</title><meta name=keywords content><meta name=description content><meta name=author content><link rel=canonical href=https://andydote.co.uk/tags/architecture/><link crossorigin=anonymous href=/assets/css/stylesheet.min.4ac25d88867f6882d86478d9b478a3d3efa1ed9e18f0bc5e432812301516cb28.css integrity="sha256-SsJdiIZ/aILYZHjZtHij0++h7Z4Y8LxeQygSMBUWyyg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/mermaid.min.725f44bd345b0a2a4043ca952b0863edd789e913cf0813a12bbdfe986fe87079.js integrity="sha256-cl9EvTRbCipAQ8qVKwhj7deJ6RPPCBOhK73+mG/ocHk="></script>
<script defer crossorigin=anonymous src=/js/tabs.min.2d019e9ee3574770ad4ecfd4f5f794739892195cb82a4e6383252b9074ab520c.js integrity="sha256-LQGenuNXR3CtTs/U9feUc5iSGVy4Kk5jgyUrkHSrUgw="></script>
<link rel=icon href=https://andydote.co.uk/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://andydote.co.uk/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://andydote.co.uk/favicon-32x32.png><link rel=apple-touch-icon href=https://andydote.co.uk/apple-touch-icon.png><link rel=mask-icon href=https://andydote.co.uk/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://andydote.co.uk/tags/architecture/rss.xml><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="architecture"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://andydote.co.uk/tags/architecture/"><meta name=twitter:card content="summary"><meta name=twitter:title content="architecture"><meta name=twitter:description content></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://andydote.co.uk accesskey=h title="Andy Dote (Alt + H)">Andy Dote</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://andydote.co.uk/archive title=Archive><span>Archive</span></a></li><li><a href=https://andydote.co.uk/talks title=Talks><span>Talks</span></a></li><li><a href=https://andydote.co.uk/notes title=Notes><span>Notes</span></a></li><li><a href=https://andydote.co.uk/tags title=Tags><span>Tags</span></a></li><li><a href=https://andydote.co.uk/contact title=Contact><span>Contact</span></a></li><li><a href=https://andydote.co.uk/rss.xml title=RSS><span>RSS</span></a></li></ul></nav></header><main class=main><header class=page-header><h1>architecture</h1></header><article class="post-entry tag-entry"><header class=entry-header><h2>Expand Contract for Databases and Services</h2></header><div class=entry-content><p>I haven’t seen Expand-Contract written about in some years, and I think it is a great way of performing database schema migrations without the need for application downtime. I also realised that it also applies to microservices and service-to-service communication in general.
The Easy Example One of the two examples given is wanting to change how an address is stored in a database. The schema starts off looking like this:...</p></div><footer class=entry-footer><span title='2023-05-18 00:00:00 +0000 UTC'>May 18, 2023</span>&nbsp;·&nbsp;4 min</footer><a class=entry-link aria-label="post link to Expand Contract for Databases and Services" href=https://andydote.co.uk/2023/05/18/expand-contract/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>How do you tag docker images?</h2></header><div class=entry-content><p>An interesting question came up at work today: how do you tag your Docker images? In previous projects, I’ve always used a short git sha, or sometimes a semver, but with no great consistency.
As luck would have it, I had pushed for a change in tagging format at a client not so long ago as the method we were using didn’t make a lot of sense and, worst of all, it was a manual process....</p></div><footer class=entry-footer><span title='2021-11-10 00:00:00 +0000 UTC'>November 10, 2021</span>&nbsp;·&nbsp;6 min</footer><a class=entry-link aria-label="post link to How do you tag docker images?" href=https://andydote.co.uk/2021/11/10/docker-tagging/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Architecture Decision Records</h2></header><div class=entry-content><p>This is a text version of a short talk (affectionately known as a “Coffee Bag”) I gave at work this week, on Architecture Design Records. You can see the slides here, but there isn’t a recording available, unfortunately.
It should be noted; these are not to replace full architecture diagrams; you should definitely still write C4 Models to cover the overall architecture. ADRs are for the details, such as serializer formats, convention-over-configuration details, number precisions for timings, or which metrics library is used and why....</p></div><footer class=entry-footer><span title='2019-06-29 00:00:00 +0000 UTC'>June 29, 2019</span>&nbsp;·&nbsp;8 min</footer><a class=entry-link aria-label="post link to Architecture Decision Records" href=https://andydote.co.uk/2019/06/29/architecture-decision-records/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Microservices or Components</h2></header><div class=entry-content><p>One of the reasons people list for using MicroServices is that it helps enforce separation of concerns. This is usually achieved by adding a network boundary between the services. While this is useful, it’s not without costs; namely that you’ve added a set of new failure modes: the network. We can achieve the same separation of concerns within the same codebase if we put our minds to it. In fact, this is what Simon Brown calls a Modular Monolith, and DHH calls the Majestic Monolith....</p></div><footer class=entry-footer><span title='2018-10-28 00:00:00 +0000 UTC'>October 28, 2018</span>&nbsp;·&nbsp;6 min</footer><a class=entry-link aria-label="post link to Microservices or Components" href=https://andydote.co.uk/2018/10/28/microservices-or-components/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Feature Toggles with Consul</h2></header><div class=entry-content><p>Feature Toggles are a great way of helping to deliver working software, although there are a few things which could go wrong. See my talk Feature Toggles: The Good, The Bad and The Ugly for some interesting stories and insights on it!
I was talking with a colleague the other day about how you could go about implementing Feature Toggles in a centralised manner into an existing system, preferably with a little overhead as possible....</p></div><footer class=entry-footer><span title='2018-09-06 00:00:00 +0000 UTC'>September 6, 2018</span>&nbsp;·&nbsp;4 min</footer><a class=entry-link aria-label="post link to Feature Toggles with Consul" href=https://andydote.co.uk/2018/09/06/consul-feature-toggles/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Evolutionary Development</h2></header><div class=entry-content><p>Having recently finished reading the Building Evolutionary Architectures: Support Constant Change book, I got to thinking about a system which was fairly representative of an architecture which was fine for it’s initial version, but it’s usage had outgrown the architecture.
Example System: Document Storage The system in question was a file store for a multi user, internal, desktop based CRM system. The number of users was very small, and the first implementation was just a network file share....</p></div><footer class=entry-footer><span title='2017-11-17 00:00:00 +0000 UTC'>November 17, 2017</span>&nbsp;·&nbsp;4 min</footer><a class=entry-link aria-label="post link to Evolutionary Development" href=https://andydote.co.uk/2017/11/17/evolutionary-development/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Strong Configuration Composition</h2></header><div class=entry-content><p>It’s no secret I am a fan of strong typing - not only do I talk and blog about it a lot, but I also have a library called Stronk which provides strong typed configuration for non dotnet core projects.
The problem I come across often is large configurations. For example, given the following project structure (3 applications, all reference the Domain project):
DemoService `-- src |-- Domain | |-- Domain....</p></div><footer class=entry-footer><span title='2017-11-09 00:00:00 +0000 UTC'>November 9, 2017</span>&nbsp;·&nbsp;5 min</footer><a class=entry-link aria-label="post link to Strong Configuration Composition" href=https://andydote.co.uk/2017/11/09/configuration-composition/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Repositories Revisited (and why CQRS is better)</h2></header><div class=entry-content><p>TLDR: I still don’t like Repositories!
Recently I had a discussion with a commenter on my The problems with, and solutions to Repositories post, and felt it was worth expanding on how I don’t use repositories.
My applications tend to use the mediator pattern to keep things decoupled (using the Mediatr library), and this means that I end up with “handler” classes which process messages; they load something from storage, call domain methods, and then write it back to storage, possibly returning some or all the data....</p></div><footer class=entry-footer><span title='2017-09-09 00:00:00 +0000 UTC'>September 9, 2017</span>&nbsp;·&nbsp;2 min</footer><a class=entry-link aria-label="post link to Repositories Revisited (and why CQRS is better)" href=https://andydote.co.uk/2017/09/09/repositories-revisited/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Don't write Frameworks, write Libraries</h2></header><div class=entry-content><p>Programmers have a fascination with writing frameworks for some reason. There are many problems with writing frameworks:
Opinions Frameworks are opinionated, and will follow their author’s opinions on how things should be done, such as application structure, configuration, and methodology. The problem this gives is that not everyone will agree with the author, or their framework’s opinions. Even if they really like part of how the framework works, they might not like another part, or might not be able to rewrite their application to take advantage of the framework....</p></div><footer class=entry-footer><span title='2017-04-16 00:00:00 +0000 UTC'>April 16, 2017</span>&nbsp;·&nbsp;3 min</footer><a class=entry-link aria-label="post link to Don't write Frameworks, write Libraries" href=https://andydote.co.uk/2017/04/16/dont-write-frameworks-write-libraries/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Don't Let The Database Dictate Your Design</h2></header><div class=entry-content><p>I have been thinking recently about how the database can influence our design decisions, and perhaps makes them harder than they need to be in some cases. An example of this is the design of a system which stores data about people, specifically for this, their email addresses. A cut down version of the structure is this:
table people id serial primary key firstname varchar(50) lastname varchar(50) table emails id serial primary key person_id int => people....</p></div><footer class=entry-footer><span title='2015-04-01 00:00:00 +0000 UTC'>April 1, 2015</span>&nbsp;·&nbsp;5 min</footer><a class=entry-link aria-label="post link to Don't Let The Database Dictate Your Design" href=https://andydote.co.uk/2015/04/01/dont-let-the-database-dictate-your-design/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://andydote.co.uk/tags/architecture/page/2/>Next Page »</a></nav></footer></main><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>