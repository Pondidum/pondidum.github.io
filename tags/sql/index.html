<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>sql | Andy Dote</title><meta name=keywords content><meta name=description content><meta name=author content><link rel=canonical href=https://andydote.co.uk/tags/sql/><link crossorigin=anonymous href=/assets/css/stylesheet.min.d3aaf8cdcec9a6487824ab95cadf08232ec362e7ba510c6b742973d16ef5b72e.css integrity="sha256-06r4zc7Jpkh4JKuVyt8IIy7DYue6UQxrdClz0W71ty4=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/mermaid.min.725f44bd345b0a2a4043ca952b0863edd789e913cf0813a12bbdfe986fe87079.js integrity="sha256-cl9EvTRbCipAQ8qVKwhj7deJ6RPPCBOhK73+mG/ocHk="></script>
<script defer crossorigin=anonymous src=/js/tabs.min.2d019e9ee3574770ad4ecfd4f5f794739892195cb82a4e6383252b9074ab520c.js integrity="sha256-LQGenuNXR3CtTs/U9feUc5iSGVy4Kk5jgyUrkHSrUgw="></script>
<link rel=icon href=https://andydote.co.uk/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://andydote.co.uk/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://andydote.co.uk/favicon-32x32.png><link rel=apple-touch-icon href=https://andydote.co.uk/apple-touch-icon.png><link rel=mask-icon href=https://andydote.co.uk/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://andydote.co.uk/tags/sql/rss.xml><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="sql"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://andydote.co.uk/tags/sql/"><meta name=twitter:card content="summary"><meta name=twitter:title content="sql"><meta name=twitter:description content></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://andydote.co.uk accesskey=h title="Andy Dote (Alt + H)">Andy Dote</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://andydote.co.uk/archive title=Archive><span>Archive</span></a></li><li><a href=https://andydote.co.uk/talks title=Talks><span>Talks</span></a></li><li><a href=https://andydote.co.uk/notes title=Notes><span>Notes</span></a></li><li><a href=https://andydote.co.uk/tags title=Tags><span>Tags</span></a></li><li><a href=https://andydote.co.uk/contact title=Contact><span>Contact</span></a></li><li><a href=https://andydote.co.uk/rss.xml title=RSS><span>RSS</span></a></li></ul></nav></header><main class=main><header class=page-header><h1>sql</h1></header><article class="post-entry tag-entry"><header class=entry-header><h2>Don't Let The Database Dictate Your Design</h2></header><div class=entry-content><p>I have been thinking recently about how the database can influence our design decisions, and perhaps makes them harder than they need to be in some cases. An example of this is the design of a system which stores data about people, specifically for this, their email addresses. A cut down version of the structure is this:
table people id serial primary key firstname varchar(50) lastname varchar(50) table emails id serial primary key person_id int => people....</p></div><footer class=entry-footer><span title='2015-04-01 00:00:00 +0000 UTC'>April 1, 2015</span>&nbsp;·&nbsp;5 min</footer><a class=entry-link aria-label="post link to Don't Let The Database Dictate Your Design" href=https://andydote.co.uk/2015/04/01/dont-let-the-database-dictate-your-design/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Edge.js for Embedded Webuis</h2></header><div class=entry-content><p>We work we have a number of windows services which each have a lot of stats they could expose. Currently they are only interrogatable by the logfiles and from any notifications we receive.
I have been toying with the idea of hosting a website in-process which would give a simple dashboard ui and access to a live view of the log file. The idea first struck me when I was experimenting with FubuMvc, as they have an EmbeddedFubuMvcServer, which is very easy to use:...</p></div><footer class=entry-footer><span title='2014-08-04 00:00:00 +0000 UTC'>August 4, 2014</span>&nbsp;·&nbsp;3 min</footer><a class=entry-link aria-label="post link to Edge.js for Embedded Webuis" href=https://andydote.co.uk/2014/08/04/edgejs-for-embedded-webuis/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Configuring Dapper to work with custom types</h2></header><div class=entry-content><p>In the last post we looked at using custom ID types to help abstract the column type from the domain.
This works well until you start trying to load and save entities using an ORM, as the ORM has not way to know how to map a column to a custom type. ORMs provide extension points to allow you to create these mappings. As I tend to favour using Dapper, we will go through setting it up to work with our custom ID types....</p></div><footer class=entry-footer><span title='2014-07-22 00:00:00 +0000 UTC'>July 22, 2014</span>&nbsp;·&nbsp;4 min</footer><a class=entry-link aria-label="post link to Configuring Dapper to work with custom types" href=https://andydote.co.uk/2014/07/22/configuring-dapper-to-work-with-custom-types/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Strong Type your entity IDs.</h2></header><div class=entry-content><p>The Database is just an Implementation Detail A quote from Martin Fowler given during his Architecture talk stated that the Database in your application should just be an implementation detail. I agree on this wholeheartedly and find that its really not that difficult to achieve if you think about your architecture carefully.
Having said that, I still see parts of the database implementation leaking out into the domain, mainly in the form of IDs....</p></div><footer class=entry-footer><span title='2014-07-17 00:00:00 +0000 UTC'>July 17, 2014</span>&nbsp;·&nbsp;5 min</footer><a class=entry-link aria-label="post link to Strong Type your entity IDs." href=https://andydote.co.uk/2014/07/17/strong-type-your-entity-ids/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Using a Micro ORM to decouple your DB Access</h2></header><div class=entry-content><p>One of the databases I use on a regular bases has a rather interesting column naming scheme; all columns have a prefix, based on the table name. For example, the table containing people would have the prefix PEO_, so you would have this:
Select * from People PEO_PersonID, PEO_FirstName, PEO_LastName, PEO_DoB ----------------------------------------------------- 1 John Jones 1984-07-15 I believe the idea was so that when querying, you would not have any column name clashes....</p></div><footer class=entry-footer><span title='2014-03-29 00:00:00 +0000 UTC'>March 29, 2014</span>&nbsp;·&nbsp;5 min</footer><a class=entry-link aria-label="post link to Using a Micro ORM to decouple your DB Access" href=https://andydote.co.uk/2014/03/29/using-a-micro-orm-to-decouple-your-db-access/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>SqlDataReader.HasRows Problems</h2></header><div class=entry-content><p>For the last 6 years or so at work, we have had an intermittent bug. In this case, intermittent means around once in 6 months or so. A little background to the problem first:
Our data access is done via what was originally Microsoft’s SQLHelper class, passing in a stored procedure (and parameters), and our entities use the reader to load all their properties. Pretty straight forward stuff.
The problemis, on the live system, every few months a sproc will stop returning results, for no apparent reason....</p></div><footer class=entry-footer><span title='2012-10-30 00:00:00 +0000 UTC'>October 30, 2012</span>&nbsp;·&nbsp;2 min</footer><a class=entry-link aria-label="post link to SqlDataReader.HasRows Problems" href=https://andydote.co.uk/2012/10/30/sqldatareaderhasrows-problems/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>SQL Like statement</h2></header><div class=entry-content><p>Today I learnt a few new (well to me) SQL commands. The Like statement can do some basic regex type things. It supports character specifiers like this:
Column Like '%[a-z]Test[a-z]%' This will find the word test as long as there is a letter at either end of the word in a block of text. You can also say Not a letter like so:
Column Like '%[^a-z]Test[^a-z]%' This should find any words Test that do not have letters before or after them....</p></div><footer class=entry-footer><span title='2009-05-15 00:00:00 +0000 UTC'>May 15, 2009</span>&nbsp;·&nbsp;1 min</footer><a class=entry-link aria-label="post link to SQL Like statement" href=https://andydote.co.uk/2009/05/15/sql-like-statement/></a></article></main><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>