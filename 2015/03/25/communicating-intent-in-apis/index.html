<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Communicating Intent in APIs | Andy Dote</title><meta name=keywords content="design,api"><meta name=description content="Recently was trying to work out how to allow custom resources to be specified in Dashen. I already know what data is needed/defined for a resource: a name, a MIME type, and a Stream. We can make this required data known very easily:
public class Resource { public string Name { get; private set; } public string MimeType { get; private set; } public Stream Content { get; private set; } public Resource(string name, string mimeType, Stream content) { Name = name; MimeType = mimeType; Content = content; } } As all the parameters can only be set through the constructor, you are communicating that they are all required."><meta name=author content><link rel=canonical href=https://andydote.co.uk/2015/03/25/communicating-intent-in-apis/><link crossorigin=anonymous href=/assets/css/stylesheet.min.b4e19c453811e60acfec1f00c15ac2be1c53f6ab90187e684358ce7faaf48bab.css integrity="sha256-tOGcRTgR5grP7B8AwVrCvhxT9quQGH5oQ1jOf6r0i6s=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.e85ad0406048e8176e1c7661b25d5c69297ddfe41dc4124cf75ecb99a4f7b3d1.js integrity="sha256-6FrQQGBI6BduHHZhsl1caSl93+QdxBJM917LmaT3s9E=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://andydote.co.uk/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://andydote.co.uk/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://andydote.co.uk/favicon-32x32.png><link rel=apple-touch-icon href=https://andydote.co.uk/apple-touch-icon.png><link rel=mask-icon href=https://andydote.co.uk/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="Communicating Intent in APIs"><meta property="og:description" content="Recently was trying to work out how to allow custom resources to be specified in Dashen. I already know what data is needed/defined for a resource: a name, a MIME type, and a Stream. We can make this required data known very easily:
public class Resource { public string Name { get; private set; } public string MimeType { get; private set; } public Stream Content { get; private set; } public Resource(string name, string mimeType, Stream content) { Name = name; MimeType = mimeType; Content = content; } } As all the parameters can only be set through the constructor, you are communicating that they are all required."><meta property="og:type" content="article"><meta property="og:url" content="https://andydote.co.uk/2015/03/25/communicating-intent-in-apis/"><meta property="article:section" content="post"><meta property="article:published_time" content="2015-03-25T00:00:00+00:00"><meta property="article:modified_time" content="2015-03-25T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Communicating Intent in APIs"><meta name=twitter:description content="Recently was trying to work out how to allow custom resources to be specified in Dashen. I already know what data is needed/defined for a resource: a name, a MIME type, and a Stream. We can make this required data known very easily:
public class Resource { public string Name { get; private set; } public string MimeType { get; private set; } public Stream Content { get; private set; } public Resource(string name, string mimeType, Stream content) { Name = name; MimeType = mimeType; Content = content; } } As all the parameters can only be set through the constructor, you are communicating that they are all required."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://andydote.co.uk/post/"},{"@type":"ListItem","position":3,"name":"Communicating Intent in APIs","item":"https://andydote.co.uk/2015/03/25/communicating-intent-in-apis/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Communicating Intent in APIs","name":"Communicating Intent in APIs","description":"Recently was trying to work out how to allow custom resources to be specified in Dashen. I already know what data is needed/defined for a resource: a name, a MIME type, and a Stream. We can make this required data known very easily:\npublic class Resource { public string Name { get; private set; } public string MimeType { get; private set; } public Stream Content { get; private set; } public Resource(string name, string mimeType, Stream content) { Name = name; MimeType = mimeType; Content = content; } } As all the parameters can only be set through the constructor, you are communicating that they are all required.","keywords":["design","api"],"articleBody":"Recently was trying to work out how to allow custom resources to be specified in Dashen. I already know what data is needed/defined for a resource: a name, a MIME type, and a Stream. We can make this required data known very easily:\npublic class Resource { public string Name { get; private set; } public string MimeType { get; private set; } public Stream Content { get; private set; } public Resource(string name, string mimeType, Stream content) { Name = name; MimeType = mimeType; Content = content; } } As all the parameters can only be set through the constructor, you are communicating that they are all required.\nHowever when it comes to adding this Resource into our configuration, we are met with 3 possible solutions:\nResource collection on the config var dashboard = DashboardBuilder.Create(new DashboardConfiguration { ListenOn = new Uri(\"http://localhost:3030\"), Resources = new[] { new Resource(\"test.png\", \"image/png\", new FileStrea(...))} }); As the DashboardConfiguration object is only used in this one call, it implies that the contents of it only get read once. Nothing to stop you holding on to a reference to the Resources collection though.\nAddResource method on the config var config = new DashboardConfiguration config.ListenOn = new Uri(\"http://localhost:3030\"); config.AddResource(new Resource(\"test.png\", \"image/png\", new FileStrea(...))); //or config.AddResource(\"test.png\", \"image/png\", new FileStrea(...)); var dashboard = DashboardBuilder.Create(config); Resources are still added to the DashboardConfiguration, but this time via a method. This hides the internal storage of resources. Second version also means we can hide the Resource class from the public too if we want. Also implies a level of uniqueness - could throw an exception on duplicate name being added, or rename the method to AddUniqueResource or similar.\nAddResource method on the Dashboard var dashboard = DashboardBuilder.Create(new DashboardConfiguration { ListenOn = new Uri(\"http://localhost:3030\"), }); dashboard.AddResource(new Resource(\"test.png\", \"image/png\", new FileStrea(...))); //or dashboard.AddResource(\"test.png\", \"image/png\", new FileStrea(...)); Resource class is still hideable. Being able to add to the dashboard rather than the config implies that resources could be added at anytime, rather than just startup/config time.\nSelected Solution In the end I decided to expose the Resources as an IEnumerable on the DashboardConfiguration object. I did this as I don’t actually mind if the collection gets modified once the dashboard is started, and I can see some use-cases for dynamic resource resolution.\n","wordCount":"378","inLanguage":"en","datePublished":"2015-03-25T00:00:00Z","dateModified":"2015-03-25T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://andydote.co.uk/2015/03/25/communicating-intent-in-apis/"},"publisher":{"@type":"Organization","name":"Andy Dote","logo":{"@type":"ImageObject","url":"https://andydote.co.uk/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://andydote.co.uk accesskey=h title="Andy Dote (Alt + H)">Andy Dote</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://andydote.co.uk/archive title=Archive><span>Archive</span></a></li><li><a href=https://andydote.co.uk/talks title=Talks><span>Talks</span></a></li><li><a href=https://andydote.co.uk/notes title=Notes><span>Notes</span></a></li><li><a href=https://andydote.co.uk/tags title=Tags><span>Tags</span></a></li><li><a href=https://andydote.co.uk/contact title=Contact><span>Contact</span></a></li><li><a href=https://andydote.co.uk/rss.xml title=RSS><span>RSS</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Communicating Intent in APIs</h1><div class=post-meta><span title='2015-03-25 00:00:00 +0000 UTC'>March 25, 2015</span>&nbsp;·&nbsp;2 min</div></header><div class=post-content><p>Recently was trying to work out how to allow custom resources to be specified in <a href=https://github.com/pondidum/Dashen>Dashen</a>. I already know what data is needed/defined for a resource: a name, a MIME type, and a Stream. We can make this required data known very easily:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Resource</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>string</span> Name { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>set</span>; }
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>string</span> MimeType { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>set</span>; }
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>public</span> Stream Content { <span style=color:#66d9ef>get</span>; <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>set</span>; }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>public</span> Resource(<span style=color:#66d9ef>string</span> name, <span style=color:#66d9ef>string</span> mimeType, Stream content)
</span></span><span style=display:flex><span>	{
</span></span><span style=display:flex><span>		Name = name;
</span></span><span style=display:flex><span>		MimeType = mimeType;
</span></span><span style=display:flex><span>		Content = content;
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>As all the parameters can only be set through the constructor, you are communicating that they are all required.</p><p>However when it comes to adding this <code>Resource</code> into our configuration, we are met with 3 possible solutions:</p><h2 id=resource-collection-on-the-config>Resource collection on the config<a hidden class=anchor aria-hidden=true href=#resource-collection-on-the-config>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> dashboard = DashboardBuilder.Create(<span style=color:#66d9ef>new</span> DashboardConfiguration
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	ListenOn = <span style=color:#66d9ef>new</span> Uri(<span style=color:#e6db74>&#34;http://localhost:3030&#34;</span>),
</span></span><span style=display:flex><span>	Resources = <span style=color:#66d9ef>new</span>[] { <span style=color:#66d9ef>new</span> Resource(<span style=color:#e6db74>&#34;test.png&#34;</span>, <span style=color:#e6db74>&#34;image/png&#34;</span>, <span style=color:#66d9ef>new</span> FileStrea(...))}
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><p>As the <code>DashboardConfiguration</code> object is only used in this one call, it implies that the contents of it only get read once.
Nothing to stop you holding on to a reference to the <code>Resources</code> collection though.</p><h2 id=addresource-method-on-the-config>AddResource method on the config<a hidden class=anchor aria-hidden=true href=#addresource-method-on-the-config>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> config = <span style=color:#66d9ef>new</span> DashboardConfiguration
</span></span><span style=display:flex><span>config.ListenOn = <span style=color:#66d9ef>new</span> Uri(<span style=color:#e6db74>&#34;http://localhost:3030&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>config.AddResource(<span style=color:#66d9ef>new</span> Resource(<span style=color:#e6db74>&#34;test.png&#34;</span>, <span style=color:#e6db74>&#34;image/png&#34;</span>, <span style=color:#66d9ef>new</span> FileStrea(...)));
</span></span><span style=display:flex><span><span style=color:#75715e>//or</span>
</span></span><span style=display:flex><span>config.AddResource(<span style=color:#e6db74>&#34;test.png&#34;</span>, <span style=color:#e6db74>&#34;image/png&#34;</span>, <span style=color:#66d9ef>new</span> FileStrea(...));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> dashboard = DashboardBuilder.Create(config);
</span></span></code></pre></div><p><code>Resources</code> are still added to the <code>DashboardConfiguration</code>, but this time via a method. This hides the internal storage of resources. Second version also means we can hide the <code>Resource</code> class from the public too if we want.
Also implies a level of uniqueness - could throw an exception on duplicate name being added, or rename the method to <code>AddUniqueResource</code> or similar.</p><h2 id=addresource-method-on-the-dashboard>AddResource method on the Dashboard<a hidden class=anchor aria-hidden=true href=#addresource-method-on-the-dashboard>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> dashboard = DashboardBuilder.Create(<span style=color:#66d9ef>new</span> DashboardConfiguration
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	ListenOn = <span style=color:#66d9ef>new</span> Uri(<span style=color:#e6db74>&#34;http://localhost:3030&#34;</span>),
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>dashboard.AddResource(<span style=color:#66d9ef>new</span> Resource(<span style=color:#e6db74>&#34;test.png&#34;</span>, <span style=color:#e6db74>&#34;image/png&#34;</span>, <span style=color:#66d9ef>new</span> FileStrea(...)));
</span></span><span style=display:flex><span><span style=color:#75715e>//or</span>
</span></span><span style=display:flex><span>dashboard.AddResource(<span style=color:#e6db74>&#34;test.png&#34;</span>, <span style=color:#e6db74>&#34;image/png&#34;</span>, <span style=color:#66d9ef>new</span> FileStrea(...));
</span></span></code></pre></div><p><code>Resource</code> class is still hideable. Being able to add to the dashboard rather than the config implies that resources could be added at anytime, rather than just startup/config time.</p><h1 id=selected-solution>Selected Solution<a hidden class=anchor aria-hidden=true href=#selected-solution>#</a></h1><p>In the end I decided to expose the <code>Resources</code> as an <code>IEnumerable&lt;Resource></code> on the <code>DashboardConfiguration</code> object. I did this as I don&rsquo;t actually mind if the collection gets modified once the dashboard is started, and I can see some use-cases for dynamic resource resolution.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://andydote.co.uk/tags/design/>design</a></li><li><a href=https://andydote.co.uk/tags/api/>api</a></li></ul><nav class=paginav><a class=prev href=https://andydote.co.uk/2015/03/28/problems-with-and-solutions-to-repositories/><span class=title>« Prev Page</span><br><span>The problems with and solutions to Repositories</span></a>
<a class=next href=https://andydote.co.uk/2014/12/05/encapsulation-in-warcraft-addons-inheritance/><span class=title>Next Page »</span><br><span>Encapsulation in Warcraft Addons - Inheritance</span></a></nav></footer></article></main><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>