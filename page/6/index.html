<!doctype html><html lang=en dir=auto><head><meta name=generator content="Hugo 0.101.0"><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Andy Dote</title><meta name=description content><meta name=author content><link rel=canonical href=https://andydote.co.uk/><link crossorigin=anonymous href=/assets/css/stylesheet.min.b4e19c453811e60acfec1f00c15ac2be1c53f6ab90187e684358ce7faaf48bab.css integrity="sha256-tOGcRTgR5grP7B8AwVrCvhxT9quQGH5oQ1jOf6r0i6s=" rel="preload stylesheet" as=style><link rel=icon href=https://andydote.co.uk/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://andydote.co.uk/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://andydote.co.uk/favicon-32x32.png><link rel=apple-touch-icon href=https://andydote.co.uk/apple-touch-icon.png><link rel=mask-icon href=https://andydote.co.uk/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://andydote.co.uk/rss.xml><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="Andy Dote"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://andydote.co.uk/"><meta name=twitter:card content="summary"><meta name=twitter:title content="Andy Dote"><meta name=twitter:description content><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"Andy Dote","url":"https://andydote.co.uk","description":"","thumbnailUrl":"https://andydote.co.uk/favicon.ico","sameAs":[]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://andydote.co.uk accesskey=h title="Andy Dote (Alt + H)">Andy Dote</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://andydote.co.uk/archive title=Archive><span>Archive</span></a></li><li><a href=https://andydote.co.uk/talks title=Talks><span>Talks</span></a></li><li><a href=https://andydote.co.uk/notes title=Notes><span>Notes</span></a></li><li><a href=https://andydote.co.uk/tags title=Tags><span>Tags</span></a></li><li><a href=https://andydote.co.uk/contact title=Contact><span>Contact</span></a></li><li><a href=https://andydote.co.uk/rss.xml title=RSS><span>RSS</span></a></li></ul></nav></header><main class=main><article class=post-entry><header class=entry-header><h2>Evolutionary Development</h2></header><div class=entry-content><p>Having recently finished reading the Building Evolutionary Architectures: Support Constant Change book, I got to thinking about a system which was fairly representative of an architecture which was fine for it’s initial version, but it’s usage had outgrown the architecture.
Example System: Document Storage The system in question was a file store for a multi user, internal, desktop based CRM system. The number of users was very small, and the first implementation was just a network file share....</p></div><footer class=entry-footer><span title='2017-11-17 00:00:00 +0000 UTC'>November 17, 2017</span>&nbsp;·&nbsp;4 min</footer><a class=entry-link aria-label="post link to Evolutionary Development" href=https://andydote.co.uk/2017/11/17/evolutionary-development/></a></article><article class=post-entry><header class=entry-header><h2>Strong Configuration Composition</h2></header><div class=entry-content><p>It’s no secret I am a fan of strong typing - not only do I talk and blog about it a lot, but I also have a library called Stronk which provides strong typed configuration for non dotnet core projects.
The problem I come across often is large configurations. For example, given the following project structure (3 applications, all reference the Domain project):
DemoService `-- src |-- Domain | |-- Domain....</p></div><footer class=entry-footer><span title='2017-11-09 00:00:00 +0000 UTC'>November 9, 2017</span>&nbsp;·&nbsp;5 min</footer><a class=entry-link aria-label="post link to Strong Configuration Composition" href=https://andydote.co.uk/2017/11/09/configuration-composition/></a></article><article class=post-entry><header class=entry-header><h2>Alarm Fatigue</h2></header><div class=entry-content><p>I’ve been on-call for work over the last week for the first time, and while it wasn’t as alarming (heh) as I thought it might be, I have had a few thoughts on it.
Non-action Alarms We have an alarm periodically about an MVC View not getting passed the right kind of model. The resolution is to mark the bug as completed/ignored in YouTrack. Reading the stack trace, I can see that the page is expecting a particular model, but is being given a HandleErrorInfo model, which is an in built type....</p></div><footer class=entry-footer><span title='2017-10-30 00:00:00 +0000 UTC'>October 30, 2017</span>&nbsp;·&nbsp;3 min</footer><a class=entry-link aria-label="post link to Alarm Fatigue" href=https://andydote.co.uk/2017/10/30/alarm-fatigue/></a></article><article class=post-entry><header class=entry-header><h2>Vagrant in the world of Docker</h2></header><div class=entry-content><p>I gave a little talk at work recently on my use of Vagrant, what it is, and why it is still useful in a world full of Docker containers.
So, What is Vagrant? Vagrant is a product by Hashicorp, and is for scripting the creation of (temporary) virtual machines. It’s pretty fast to create a virtual machine with too, as it creates them from a base image (known as a “box”....</p></div><footer class=entry-footer><span title='2017-10-22 00:00:00 +0000 UTC'>October 22, 2017</span>&nbsp;·&nbsp;4 min</footer><a class=entry-link aria-label="post link to Vagrant in the world of Docker" href=https://andydote.co.uk/2017/10/22/vagrant-in-a-world-of-docker/></a></article><article class=post-entry><header class=entry-header><h2>Testing RabbitMQ Concurrency in MassTransit</h2></header><div class=entry-content><p>We have a service which consumes messages from a RabbitMQ queue - for each message, it makes a few http calls, collates the results, does a little processing, and then pushes the results to a 3rd party api. One of the main benefits to having this behind a queue is our usage pattern - the queue usually only has a few messages in it per second, but periodically it will get a million or so messages within 30 minutes (so from ~5 messages/second to ~560 messages/second....</p></div><footer class=entry-footer><span title='2017-10-11 00:00:00 +0000 UTC'>October 11, 2017</span>&nbsp;·&nbsp;4 min</footer><a class=entry-link aria-label="post link to Testing RabbitMQ Concurrency in MassTransit" href=https://andydote.co.uk/2017/10/11/masstransit-rabbitmq-concurrency-testing/></a></article><article class=post-entry><header class=entry-header><h2>Composite Decorators with StructureMap</h2></header><div class=entry-content><p>While I was developing my Crispin project, I ended up needing to create a bunch of implementations of a single interface, and then use all those implementations at once (for metrics logging).
The interface looks like so:
public interface IStatisticsWriter { Task WriteCount(string format, params object[] parameters); } And we have a few implementations already:
LoggingStatisticsWriter - writes to an ILogger instance StatsdStatisticsWriter - pushes metrics to StatsD InternalStatisticsWriter - aggregates metrics for exposing via Crispin’s api To make all of these be used together, I created a fourth implementation, called CompositeStatisticsWriter (a name I made up, but apparently matches the Gang of Four definition of a composite!...</p></div><footer class=entry-footer><span title='2017-10-04 00:00:00 +0000 UTC'>October 4, 2017</span>&nbsp;·&nbsp;3 min</footer><a class=entry-link aria-label="post link to Composite Decorators with StructureMap" href=https://andydote.co.uk/2017/10/04/structuremap-composite-decorator/></a></article><article class=post-entry><header class=entry-header><h2>Integration Testing with Dotnet Core, Docker and RabbitMQ</h2></header><div class=entry-content><p>When building libraries, not only is it a good idea to have a large suite of Unit Tests, but also a suite of Integration Tests.
For one of my libraries (RabbitHarness) I have a set of tests which check it behaves as expected against a real instance of RabbitMQ. Ideally these tests will always be run, but sometimes RabbitMQ just isn’t available such as when running on AppVeyor builds, or if I haven’t started my local RabbitMQ Docker container....</p></div><footer class=entry-footer><span title='2017-10-02 00:00:00 +0000 UTC'>October 2, 2017</span>&nbsp;·&nbsp;4 min</footer><a class=entry-link aria-label="post link to Integration Testing with Dotnet Core, Docker and RabbitMQ" href=https://andydote.co.uk/2017/10/02/dotnet-core-docker-integration-tests/></a></article><article class=post-entry><header class=entry-header><h2>Implementing Custom Aspnet Core ModelBinders</h2></header><div class=entry-content><p>This post is a summary of a stream I did last night where I implemented all of this. If you want to watch me grumble my way through it, it’s available on YouTube here.
In my Crispin project, I wanted the ability to support loading Toggles by both name and ID, for all operations. As I use mediator to send messages from my controllers to the handlers in the domain, this means that I had to either:...</p></div><footer class=entry-footer><span title='2017-09-22 00:00:00 +0000 UTC'>September 22, 2017</span>&nbsp;·&nbsp;5 min</footer><a class=entry-link aria-label="post link to Implementing Custom Aspnet Core ModelBinders" href=https://andydote.co.uk/2017/09/22/implemeting-custom-aspnetcore-modelbinders/></a></article><article class=post-entry><header class=entry-header><h2>Testing Containers or Test Behaviour, Not Implementation</h2></header><div class=entry-content><p>The trouble with testing containers is that usually the test ends up very tightly coupled to the implementation.
Let’s see an example. If we start off with an interface and implementation of a “cache”, which in this case is just going to store a single string value.
public interface ICache { string Value { get; set; } } public class Cache { public string Value { get; set; } } We then setup our container (StructureMap in this case) to return the same instance of the cache whenever an ICache is requested:...</p></div><footer class=entry-footer><span title='2017-09-17 00:00:00 +0000 UTC'>September 17, 2017</span>&nbsp;·&nbsp;2 min</footer><a class=entry-link aria-label="post link to Testing Containers or Test Behaviour, Not Implementation" href=https://andydote.co.uk/2017/09/17/testing-containers/></a></article><article class=post-entry><header class=entry-header><h2>Repositories Revisited (and why CQRS is better)</h2></header><div class=entry-content><p>TLDR: I still don’t like Repositories!
Recently I had a discussion with a commenter on my The problems with, and solutions to Repositories post, and felt it was worth expanding on how I don’t use repositories.
My applications tend to use the mediator pattern to keep things decoupled (using the Mediatr library), and this means that I end up with “handler” classes which process messages; they load something from storage, call domain methods, and then write it back to storage, possibly returning some or all the data....</p></div><footer class=entry-footer><span title='2017-09-09 00:00:00 +0000 UTC'>September 9, 2017</span>&nbsp;·&nbsp;2 min</footer><a class=entry-link aria-label="post link to Repositories Revisited (and why CQRS is better)" href=https://andydote.co.uk/2017/09/09/repositories-revisited/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://andydote.co.uk/page/5/>« Prev Page</a>
<a class=next href=https://andydote.co.uk/page/7/>Next Page »</a></nav></footer></main><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>