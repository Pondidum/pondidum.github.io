<!doctype html><html lang=en dir=auto><head><meta name=generator content="Hugo 0.109.0"><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Andy Dote</title><meta name=description content><meta name=author content><link rel=canonical href=https://andydote.co.uk/><link crossorigin=anonymous href=/assets/css/stylesheet.min.ea821116adbd94ff8c04bf7745204429750a1079f16951db0415b837fc273249.css integrity="sha256-6oIRFq29lP+MBL93RSBEKXUKEHnxaVHbBBW4N/wnMkk=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/mermaid.min.725f44bd345b0a2a4043ca952b0863edd789e913cf0813a12bbdfe986fe87079.js integrity="sha256-cl9EvTRbCipAQ8qVKwhj7deJ6RPPCBOhK73+mG/ocHk="></script>
<link rel=icon href=https://andydote.co.uk/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://andydote.co.uk/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://andydote.co.uk/favicon-32x32.png><link rel=apple-touch-icon href=https://andydote.co.uk/apple-touch-icon.png><link rel=mask-icon href=https://andydote.co.uk/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://andydote.co.uk/rss.xml><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="Andy Dote"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://andydote.co.uk/"><meta name=twitter:card content="summary"><meta name=twitter:title content="Andy Dote"><meta name=twitter:description content><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"Andy Dote","url":"https://andydote.co.uk","description":"","thumbnailUrl":"https://andydote.co.uk/favicon.ico","sameAs":[]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://andydote.co.uk accesskey=h title="Andy Dote (Alt + H)">Andy Dote</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://andydote.co.uk/archive title=Archive><span>Archive</span></a></li><li><a href=https://andydote.co.uk/talks title=Talks><span>Talks</span></a></li><li><a href=https://andydote.co.uk/notes title=Notes><span>Notes</span></a></li><li><a href=https://andydote.co.uk/tags title=Tags><span>Tags</span></a></li><li><a href=https://andydote.co.uk/contact title=Contact><span>Contact</span></a></li><li><a href=https://andydote.co.uk/rss.xml title=RSS><span>RSS</span></a></li></ul></nav></header><main class=main><article class=post-entry><header class=entry-header><h2>The problems with and solutions to Repositories</h2></header><div class=entry-content><p>Repositories are a design pattern which I have never been a huge fan of. I can see the use of them as a good layer boundary, but too often I see them being used all over the place instead of at an infrastructure level in a code base.
A particularly prevalent version of this misuse I see is self populating collections. These generally inherit List&lt;TEntity> or Dictionary&lt;TID, TEntity>, and provide a set of methods such as ....</p></div><footer class=entry-footer><span title='2015-03-28 00:00:00 +0000 UTC'>March 28, 2015</span>&nbsp;·&nbsp;3 min</footer><a class=entry-link aria-label="post link to The problems with and solutions to Repositories" href=https://andydote.co.uk/2015/03/28/problems-with-and-solutions-to-repositories/></a></article><article class=post-entry><header class=entry-header><h2>Communicating Intent in APIs</h2></header><div class=entry-content><p>Recently was trying to work out how to allow custom resources to be specified in Dashen. I already know what data is needed/defined for a resource: a name, a MIME type, and a Stream. We can make this required data known very easily:
public class Resource { public string Name { get; private set; } public string MimeType { get; private set; } public Stream Content { get; private set; } public Resource(string name, string mimeType, Stream content) { Name = name; MimeType = mimeType; Content = content; } } As all the parameters can only be set through the constructor, you are communicating that they are all required....</p></div><footer class=entry-footer><span title='2015-03-25 00:00:00 +0000 UTC'>March 25, 2015</span>&nbsp;·&nbsp;2 min</footer><a class=entry-link aria-label="post link to Communicating Intent in APIs" href=https://andydote.co.uk/2015/03/25/communicating-intent-in-apis/></a></article><article class=post-entry><header class=entry-header><h2>Encapsulation in Warcraft Addons - Inheritance</h2></header><div class=entry-content><p>Using Inheritance (sort of) When we actually need inheritance, things get a little more complicated. We need to use two of lua’s slightly harder features to get it to work: metatables and colon notation. A little background on these will help:
MetaTables All “objects” in lua are tables, and tables can something called a metatable added to them. Metatables can have special methods on them which run under certain circumstances (called metamethods), such as keys being added....</p></div><footer class=entry-footer><span title='2014-12-05 00:00:00 +0000 UTC'>December 5, 2014</span>&nbsp;·&nbsp;6 min</footer><a class=entry-link aria-label="post link to Encapsulation in Warcraft Addons - Inheritance" href=https://andydote.co.uk/2014/12/05/encapsulation-in-warcraft-addons-inheritance/></a></article><article class=post-entry><header class=entry-header><h2>Encapsulation in Warcraft Addons - Closures</h2></header><div class=entry-content><p>In the last post I alluded to the fact that if you put in a little leg work, you could write well encapsulated objects in lua. There are two main ways to do this; with closures, and with metatables. In this post we will deal with using closures, and in the next post we will cover using metatables.
Using Closures The simplest way to write an object in lua is with a closure to hide all the variables from the outside world....</p></div><footer class=entry-footer><span title='2014-11-28 00:00:00 +0000 UTC'>November 28, 2014</span>&nbsp;·&nbsp;4 min</footer><a class=entry-link aria-label="post link to Encapsulation in Warcraft Addons - Closures" href=https://andydote.co.uk/2014/11/28/encapsulation-in-warcraft-addons-closures/></a></article><article class=post-entry><header class=entry-header><h2>Good Design in Warcraft Addons/Lua</h2></header><div class=entry-content><p>Lack of Encapsulation in Addons I first noticed a lack of good design in addon code when I started trying to tweak existing addons to be slightly different.
One of the stand out examples was a Threat Meter (you know which one I mean). It works well, but I felt like writing my own, to make it really fit into my UI, with as little overhead as possible. Not knowing how to even begin writing a Threat Meter, I downloaded a copy, and opened its source directory… to discover that the entire addon is one 3500+ line file, and 16 Ace....</p></div><footer class=entry-footer><span title='2014-11-23 00:00:00 +0000 UTC'>November 23, 2014</span>&nbsp;·&nbsp;7 min</footer><a class=entry-link aria-label="post link to Good Design in Warcraft Addons/Lua" href=https://andydote.co.uk/2014/11/23/good-design-in-warcraft-addons/></a></article><article class=post-entry><header class=entry-header><h2>Edge.js for Embedded Webuis</h2></header><div class=entry-content><p>We work we have a number of windows services which each have a lot of stats they could expose. Currently they are only interrogatable by the logfiles and from any notifications we receive.
I have been toying with the idea of hosting a website in-process which would give a simple dashboard ui and access to a live view of the log file. The idea first struck me when I was experimenting with FubuMvc, as they have an EmbeddedFubuMvcServer, which is very easy to use:...</p></div><footer class=entry-footer><span title='2014-08-04 00:00:00 +0000 UTC'>August 4, 2014</span>&nbsp;·&nbsp;3 min</footer><a class=entry-link aria-label="post link to Edge.js for Embedded Webuis" href=https://andydote.co.uk/2014/08/04/edgejs-for-embedded-webuis/></a></article><article class=post-entry><header class=entry-header><h2>Configuring Dapper to work with custom types</h2></header><div class=entry-content><p>In the last post we looked at using custom ID types to help abstract the column type from the domain.
This works well until you start trying to load and save entities using an ORM, as the ORM has not way to know how to map a column to a custom type. ORMs provide extension points to allow you to create these mappings. As I tend to favour using Dapper, we will go through setting it up to work with our custom ID types....</p></div><footer class=entry-footer><span title='2014-07-22 00:00:00 +0000 UTC'>July 22, 2014</span>&nbsp;·&nbsp;4 min</footer><a class=entry-link aria-label="post link to Configuring Dapper to work with custom types" href=https://andydote.co.uk/2014/07/22/configuring-dapper-to-work-with-custom-types/></a></article><article class=post-entry><header class=entry-header><h2>Strong Type your entity IDs.</h2></header><div class=entry-content><p>The Database is just an Implementation Detail A quote from Martin Fowler given during his Architecture talk stated that the Database in your application should just be an implementation detail. I agree on this wholeheartedly and find that its really not that difficult to achieve if you think about your architecture carefully.
Having said that, I still see parts of the database implementation leaking out into the domain, mainly in the form of IDs....</p></div><footer class=entry-footer><span title='2014-07-17 00:00:00 +0000 UTC'>July 17, 2014</span>&nbsp;·&nbsp;5 min</footer><a class=entry-link aria-label="post link to Strong Type your entity IDs." href=https://andydote.co.uk/2014/07/17/strong-type-your-entity-ids/></a></article><article class=post-entry><header class=entry-header><h2>Specific Interfaces</h2></header><div class=entry-content><p>While writing my CruiseCli project, I needed to do some data storage, and so used my standard method of filesystem access, the IFileSystem. This is an interface and implementation which I tend to copy from project to project, and use as is. The interface looks like the following:
public interface IFileSystem { bool FileExists(string path); void WriteFile(string path, Stream contents); void AppendFile(string path, Stream contents); Stream ReadFile(string path); void DeleteFile(string path); bool DirectoryExists(string path); void CreateDirectory(string path); IEnumerable&lt;string> ListDirectory(string path); void DeleteDirectory(string path); } And the standard implementation looks like the following:...</p></div><footer class=entry-footer><span title='2014-06-08 00:00:00 +0000 UTC'>June 8, 2014</span>&nbsp;·&nbsp;3 min</footer><a class=entry-link aria-label="post link to Specific Interfaces" href=https://andydote.co.uk/2014/06/08/specific-interfaces-smaller-abstractions/></a></article><article class=post-entry><header class=entry-header><h2>Using StructureMap Registries for better separation</h2></header><div class=entry-content><p>When it comes to configuring StructureMap, it supports the use of Registries. Registries support everything that the standard configure method does(new Container(c => { /* */});).
There are two main reasons that I use the registries rather then doing all my configuration in the Container’s lambda: separation of concerns (one registry per area of code) and easier testing (which we will go into shortly).
The only down side I can see to using registries is that it can scatter your configuration across your codebase - but if you have ReSharper, doing a ‘Find Implementations’ on Registry will find them all for you, so it really isn’t much of a down side....</p></div><footer class=entry-footer><span title='2014-05-19 00:00:00 +0000 UTC'>May 19, 2014</span>&nbsp;·&nbsp;3 min</footer><a class=entry-link aria-label="post link to Using StructureMap Registries for better separation" href=https://andydote.co.uk/2014/05/19/using-structuremap-registries/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://andydote.co.uk/page/9/>« Prev Page</a>
<a class=next href=https://andydote.co.uk/page/11/>Next Page »</a></nav></footer></main><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>