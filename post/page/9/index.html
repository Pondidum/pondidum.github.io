<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Posts | Andy Dote</title><meta name=keywords content><meta name=description content="Posts - Andy Dote"><meta name=author content><link rel=canonical href=https://andydote.co.uk/post/><link crossorigin=anonymous href=/assets/css/stylesheet.min.ea821116adbd94ff8c04bf7745204429750a1079f16951db0415b837fc273249.css integrity="sha256-6oIRFq29lP+MBL93RSBEKXUKEHnxaVHbBBW4N/wnMkk=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/mermaid.min.725f44bd345b0a2a4043ca952b0863edd789e913cf0813a12bbdfe986fe87079.js integrity="sha256-cl9EvTRbCipAQ8qVKwhj7deJ6RPPCBOhK73+mG/ocHk="></script>
<link rel=icon href=https://andydote.co.uk/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://andydote.co.uk/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://andydote.co.uk/favicon-32x32.png><link rel=apple-touch-icon href=https://andydote.co.uk/apple-touch-icon.png><link rel=mask-icon href=https://andydote.co.uk/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://andydote.co.uk/post/rss.xml><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="Posts"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://andydote.co.uk/post/"><meta name=twitter:card content="summary"><meta name=twitter:title content="Posts"><meta name=twitter:description content><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://andydote.co.uk/post/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://andydote.co.uk accesskey=h title="Andy Dote (Alt + H)">Andy Dote</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://andydote.co.uk/archive title=Archive><span>Archive</span></a></li><li><a href=https://andydote.co.uk/talks title=Talks><span>Talks</span></a></li><li><a href=https://andydote.co.uk/notes title=Notes><span>Notes</span></a></li><li><a href=https://andydote.co.uk/tags title=Tags><span>Tags</span></a></li><li><a href=https://andydote.co.uk/contact title=Contact><span>Contact</span></a></li><li><a href=https://andydote.co.uk/rss.xml title=RSS><span>RSS</span></a></li></ul></nav></header><main class=main><header class=page-header><h1>Posts</h1></header><article class=post-entry><header class=entry-header><h2>RabbitMQ integration tests in XUnit</h2></header><div class=entry-content><p>Quite a number of my projects involve talking to RabbitMQ, and to help check things work as expected, I often have a number of integration tests which talk to a local RabbitMQ instance.
While this is fine for tests being run locally, it does cause problems with the build servers - we don’t want to install RabbitMQ on there, and we don’t typically want the build to be dependent on RabbitMQ....</p></div><footer class=entry-footer><span title='2016-03-18 00:00:00 +0000 UTC'>March 18, 2016</span>&nbsp;·&nbsp;2 min</footer><a class=entry-link aria-label="post link to RabbitMQ integration tests in XUnit" href=https://andydote.co.uk/2016/03/18/rabbitmq-xunit/></a></article><article class=post-entry><header class=entry-header><h2>Generating AssemblyInfo files with Gulp</h2></header><div class=entry-content><p>When changing a project’s build script over to Gulpjs, I ran into a problem with one step - creating an AssemblyInfo.cs file.
My projects have their version number in the package.json file, and I read that at compile time, pull in some information from the build server, and write that to an AssemblyVersion.cs file. This file is not tracked by git, and I don’t want it showing up as a modification if you run the build script locally....</p></div><footer class=entry-footer><span title='2015-11-19 00:00:00 +0000 UTC'>November 19, 2015</span>&nbsp;·&nbsp;2 min</footer><a class=entry-link aria-label="post link to Generating AssemblyInfo files with Gulp" href=https://andydote.co.uk/2015/11/19/generating-assemblyinfo-files-gulpjs/></a></article><article class=post-entry><header class=entry-header><h2>Posting PlainText to Asp WebApi</h2></header><div class=entry-content><p>Recently I have been writing a WebApi project which needs to accept plaintext via the body of a PUT request, and did the logical thing of using the FromBodyAttribute
public HttpStatusCode PutKv([FromBody]string content, string keyGreedy) { return HttpStatusCode.OK; } Which didn’t work, with the useful error message of “Unsupported media type.”
It turns out that to bind a value type with the FromBody attribute, you have to prefix the body of your request with an =....</p></div><footer class=entry-footer><span title='2015-09-21 00:00:00 +0000 UTC'>September 21, 2015</span>&nbsp;·&nbsp;2 min</footer><a class=entry-link aria-label="post link to Posting PlainText to Asp WebApi" href=https://andydote.co.uk/2015/09/21/webapi-post-plaintext/></a></article><article class=post-entry><header class=entry-header><h2>Running pre-compiled microservices in Docker with Mono</h2></header><div class=entry-content><p>Last time we went through creating a Dockerfile for a microservice, with the service being compiled on creation of the container image, using xbuild.
However we might not want to compile the application to create the container image, and use an existing version (e.g. one created by a build server.)
Our original Dockerfile was this:
FROM mono:3.10-onbuild RUN apt-get update && apt-get install mono-4.0-service -y CMD [ "mono-service", "./MicroServiceDemo.exe", "--no-daemon" ] EXPOSE 12345 We only need to make a few modifications to use a pre-compiled application:...</p></div><footer class=entry-footer><span title='2015-09-15 00:00:00 +0000 UTC'>September 15, 2015</span>&nbsp;·&nbsp;2 min</footer><a class=entry-link aria-label="post link to Running pre-compiled microservices in Docker with Mono" href=https://andydote.co.uk/2015/09/15/pre-compiled-microservices/></a></article><article class=post-entry><header class=entry-header><h2>Running microservices in Docker with Mono</h2></header><div class=entry-content><p>Getting a service running under Docker is fairly straight forward once you have all the working parts together. I have an app written (following my guide on service and console in one), which uses Owin to serve a web page as a demo:
install-package Microsoft.Owin.SelfHost public partial class Service : ServiceBase { //see the service console post for the rest of this protected override void OnStart(string[] args) { _app = WebApp....</p></div><footer class=entry-footer><span title='2015-09-05 00:00:00 +0000 UTC'>September 5, 2015</span>&nbsp;·&nbsp;2 min</footer><a class=entry-link aria-label="post link to Running microservices in Docker with Mono" href=https://andydote.co.uk/2015/09/05/running-microservices-in-docker-with-mono/></a></article><article class=post-entry><header class=entry-header><h2>A single project Windows Service and Console</h2></header><div class=entry-content><p>I have found that when developing MicroServices, I often want to run them from within Visual Studio, or just as a console application, and not have to bother with the hassle of installing as windows services.
In the past I have seen this achieved by creating a Class Library project with all the actual implementation inside it, and then both a Console Application and Windows Service project referencing the library and doing nothing other than calling a ....</p></div><footer class=entry-footer><span title='2015-08-30 00:00:00 +0000 UTC'>August 30, 2015</span>&nbsp;·&nbsp;3 min</footer><a class=entry-link aria-label="post link to A single project Windows Service and Console" href=https://andydote.co.uk/2015/08/30/single-project-service-and-console/></a></article><article class=post-entry><header class=entry-header><h2>Don't Let The Database Dictate Your Design</h2></header><div class=entry-content><p>I have been thinking recently about how the database can influence our design decisions, and perhaps makes them harder than they need to be in some cases. An example of this is the design of a system which stores data about people, specifically for this, their email addresses. A cut down version of the structure is this:
table people id serial primary key firstname varchar(50) lastname varchar(50) table emails id serial primary key person_id int => people....</p></div><footer class=entry-footer><span title='2015-04-01 00:00:00 +0000 UTC'>April 1, 2015</span>&nbsp;·&nbsp;5 min</footer><a class=entry-link aria-label="post link to Don't Let The Database Dictate Your Design" href=https://andydote.co.uk/2015/04/01/dont-let-the-database-dictate-your-design/></a></article><article class=post-entry><header class=entry-header><h2>The problems with and solutions to Repositories</h2></header><div class=entry-content><p>Repositories are a design pattern which I have never been a huge fan of. I can see the use of them as a good layer boundary, but too often I see them being used all over the place instead of at an infrastructure level in a code base.
A particularly prevalent version of this misuse I see is self populating collections. These generally inherit List&lt;TEntity> or Dictionary&lt;TID, TEntity>, and provide a set of methods such as ....</p></div><footer class=entry-footer><span title='2015-03-28 00:00:00 +0000 UTC'>March 28, 2015</span>&nbsp;·&nbsp;3 min</footer><a class=entry-link aria-label="post link to The problems with and solutions to Repositories" href=https://andydote.co.uk/2015/03/28/problems-with-and-solutions-to-repositories/></a></article><article class=post-entry><header class=entry-header><h2>Communicating Intent in APIs</h2></header><div class=entry-content><p>Recently was trying to work out how to allow custom resources to be specified in Dashen. I already know what data is needed/defined for a resource: a name, a MIME type, and a Stream. We can make this required data known very easily:
public class Resource { public string Name { get; private set; } public string MimeType { get; private set; } public Stream Content { get; private set; } public Resource(string name, string mimeType, Stream content) { Name = name; MimeType = mimeType; Content = content; } } As all the parameters can only be set through the constructor, you are communicating that they are all required....</p></div><footer class=entry-footer><span title='2015-03-25 00:00:00 +0000 UTC'>March 25, 2015</span>&nbsp;·&nbsp;2 min</footer><a class=entry-link aria-label="post link to Communicating Intent in APIs" href=https://andydote.co.uk/2015/03/25/communicating-intent-in-apis/></a></article><article class=post-entry><header class=entry-header><h2>Encapsulation in Warcraft Addons - Inheritance</h2></header><div class=entry-content><p>Using Inheritance (sort of) When we actually need inheritance, things get a little more complicated. We need to use two of lua’s slightly harder features to get it to work: metatables and colon notation. A little background on these will help:
MetaTables All “objects” in lua are tables, and tables can something called a metatable added to them. Metatables can have special methods on them which run under certain circumstances (called metamethods), such as keys being added....</p></div><footer class=entry-footer><span title='2014-12-05 00:00:00 +0000 UTC'>December 5, 2014</span>&nbsp;·&nbsp;6 min</footer><a class=entry-link aria-label="post link to Encapsulation in Warcraft Addons - Inheritance" href=https://andydote.co.uk/2014/12/05/encapsulation-in-warcraft-addons-inheritance/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://andydote.co.uk/post/page/8/>« Prev Page</a>
<a class=next href=https://andydote.co.uk/post/page/10/>Next Page »</a></nav></footer></main><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>